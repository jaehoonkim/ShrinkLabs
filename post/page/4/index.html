<!DOCTYPE html>
<html lang="en">
  <head>
  	<meta charset="utf-8">
  	<meta name="viewport"    content="width=device-width, initial-scale=1.0">
  	<meta name="description" content="">
  	<meta name="author"      content="map[]">
    
    	<title>Posts</title>
	<link rel="shortcut icon" href="https://shrinklabs.com/images/favicon.ico">

	
	<link href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.no-icons.min.css" rel="stylesheet">
	
	
	<script defer src="https://use.fontawesome.com/releases/v5.0.11/js/all.js" integrity="sha384-ImVoB8Er8knetgQakxuBS4G3RSkyD8IZVVQCAnmRJrDwqJFYUE4YOv+DbIofcO9C" crossorigin="anonymous"></script>
	
	
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Alice|Open+Sans:400,300,700">
	
	
  
  <link rel="stylesheet" href="https://shrinklabs.com/css/styles.min.16be9015b1d15d94201894c956885e507505d7b2f836db72cf9bb664b89c63ac6f9b7de5b6d4671478edb138a9c227c4c4e6619e22ef55bd586fa93fb6eed058.css" integrity="sha512-Fr6QFbHRXZQgGJTJVoheUHUF17L4Nttyz5u2ZLicY6xvm33lttRnFHjtsTipwifExOZhniLvVb1Yb6k/tu7QWA==">

   
  

  </head>
  
  <body class="home">

    
      <header id="header">
  <div id="head" class="parallax" data-parallax-speed="2" style="background-image:url('https://shrinklabs.com/images/bg_head.jpg');">
    <h1 id="logo" class="text-center">
      <img class='img-circle' src="https://shrinklabs.com/images/logo.png" alt="">
      <span class="title"></span>
      <span class="tagline"><br>
        <a href="mailto:"></a>
      </span>
   </h1>
</div>

<nav class="navbar navbar-default navbar-sticky">
    <div class="container-fluid">

        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="true">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>

        <div class="navbar-collapse collapse" id="bs-example-navbar-collapse-1">

            <ul class="nav navbar-nav">
            
                
                <li>
                    <a href="/">home</a>
                </li>
                
            
                
                <li>
                    <a href="/post/">blog</a>
                </li>
                
            
                
                <li>
                    <a href="/about/">About</a>
                </li>
                
            
            </ul>

        </div> 
        
    </div>
</nav>

</header>
    
 
    
<main id="main">

	<div class="container">
		<div class="row topspace">
			<div class="col-sm-8 col-sm-offset-2">

        
				<article class="post">
					<header class="entry-header">
						<div class="entry-meta">
               <span class="posted-on">
                  <time class="entry-date published" datetime="April 19, 2017">April 19, 2017</time>
               </span>
						</div>
						<h1 class="entry-title">
						  <a href="https://shrinklabs.com/post/go_rabbitmqwithgo/" rel="bookmark">RabbitMQ 스터디(with go)</a>
						</h1>
					</header>
					<div class="entry-content">
						<p>Go언어로  RabbitMQ를 어떻게 이용할 수 있는지 스터디하는 내용들을 대충 대충  정리하는 중&hellip;</p>
<h2 id="rabbitmq라는게-뭐지">RabbitMQ라는게 뭐지?</h2>
<p>AMQP를 구현한 메세지 브로커<br>
여기 저기에 있는 클라이언트들(Producer/Consumer)이 메세지를 서로 주고 받을 수 있도록 해주는 그런거?</p>
<h2 id="설치">설치</h2>
<ul>
<li>RabbitMQ 설치</li>
</ul>
<pre><code>sudo apt-get install rabbitmq-server
</code></pre><ul>
<li>관리 플러그인 설치</li>
</ul>
<pre><code>sudo rabbitmq-plugins enable rabbitmq_management   
sudo service rabbitmq-server restart
</code></pre><ul>
<li>실행</li>
</ul>
<pre><code>service rabbitmq-server start
</code></pre><ul>
<li>계정 등록(id:jaehoonn, pw:1234)</li>
</ul>
<pre><code>rabbimqctl add_user jaehoonn 1234
</code></pre><ul>
<li>등록한 계정을 관리자 계정으로 변경</li>
</ul>
<pre><code>rabbitmqctl set_user_tags jaehoonn administrator
</code></pre><ul>
<li>웹브라우저로 관리 플러그인에 접속</li>
</ul>
<pre><code>localhost:15672  
</code></pre><h2 id="용어">용어</h2>
<p>대충 요런것들에 대해서 찾아 보면 될 것 같은데&hellip;</p>
<ul>
<li>브로커(broker): 미들웨어, 메세지를 받고 전달</li>
<li>가상호스트(virtual host): 가상 영역</li>
<li>연결(connection): 물리적인 네트워크 연결(?)</li>
<li>채널(channel): 논리적인 네트워크 연결(?)</li>
<li>익스체인지(exchange): 생산된 새로운 메세지를 큐에 전달</li>
<li>큐(queue): RabbitMQ 에 존재하는 우편함으로 메세지를 저장</li>
<li>결합(binding): 익스체인지와 큐를 연결</li>
<li>큐(queue)의 속성</li>
<li>durable: 브로커가 재시작되어도 큐를 선언한 상태로 유지 여부</li>
<li>autoDelete: 큐에서 소비할 대상이 없을때 큐의 유지 여부</li>
<li>exclusive: 다른 연결에서 큐를 사용 가능 여부</li>
<li>arguments: 사용자 정의 큐를 설정</li>
</ul>
<h2 id="go언어에서-rabbitmq-사용">Go언어에서 RabbitMQ 사용</h2>
<ul>
<li>패키지는 amqp를 사용 (<a href="https://github.com/streadway/amqp">https://github.com/streadway/amqp</a>)</li>
<li>tutorial(<a href="http://www.rabbitmq.com/getstarted.html">http://www.rabbitmq.com/getstarted.html</a>) 을 보면 6개의 챕터로 나누어져 있으며, 각 챕터마다 Go언어를 사용한 내용이 존재한다.</li>
<li>tutorial의 예제 코드는 github(<a href="https://github.com/rabbitmq/rabbitmq-tutorials/tree/master/go">https://github.com/rabbitmq/rabbitmq-tutorials/tree/master/go</a>) 에서 확인 할 수 있다.</li>
</ul>
<h2 id="amqp-패키지">amqp 패키지</h2>
<ul>
<li>
<p>Type은 다음과 같은 것들이 있다.</p>
<ul>
<li>Acknowledger</li>
<li>Authentication</li>
<li>Blocking</li>
<li>Channel</li>
<li>Config</li>
<li>Configuration</li>
<li>Connection</li>
<li>Decimal</li>
<li>Delivery</li>
<li>Error</li>
<li>PlainAuth</li>
<li>Publishing</li>
<li>Queue</li>
<li>Return</li>
<li>Table</li>
<li>URI</li>
</ul>
</li>
<li>
<p>여기에서 Acknowledger와 Authentication은 인터페이스 이므로 패스,<br>
패키지 내부에서 사용하는 타입(?)들인 Blocking, Configuration, Decimal, Error, Publishing, Queue, Table도 패스<br>
Config, URI, Delivery는 DialXXX, Open 함수, Connection, Channel 타입에서 사용하는 용도이므로 대충 이런거구나 하고 패스<br>
Connection, Channel 타입에 대해서만 좀 알아 보면 좋을것 같다.</p>
</li>
<li>
<p>Connection의 메소드들에 대해서 알아보자</p>
<ul>
<li>Channel()</li>
<li>Close()</li>
<li>ConnectionState()</li>
<li>LocalAddr()</li>
<li>Notify(Blocked, Close)</li>
</ul>
</li>
<li>
<p>Channel의 메소드들에 대해서 알아보자</p>
<ul>
<li>Acknowledger 인터페이스의 구현 메소드<br>
Ack(), Nack(), Reject()</li>
<li>Channel 기능에 대한 메소드 나열<br>
Cancel(), Close(), Confirm(), Consume(), Flow(), Get(), Publish(), Qos(), Recover()</li>
<li>Exchange, Notify, Queue, Tx 관리 메소드<br>
Exchange(Bind, Declare, DeclarePassive, Delete, Unbind)<br>
Notify(Cancel, Close, Confirm, Flow, Publish, Return)<br>
Queue(Bind, Declare, DeclarePassive, Delete, Inspect, Purge, Unbind)<br>
Tx(, Commit, Rollback)</li>
</ul>
</li>
</ul>
<h2 id="tutorial">tutorial</h2>
<ol>
<li>&ldquo;Hello World&rdquo; (<a href="http://www.rabbitmq.com/tutorials/tutorial-one-go.html">http://www.rabbitmq.com/tutorials/tutorial-one-go.html</a>)</li>
<li>Work Queues (<a href="http://www.rabbitmq.com/tutorials/tutorial-two-go.html">http://www.rabbitmq.com/tutorials/tutorial-two-go.html</a>)</li>
<li>Publish/Subscribe (<a href="http://www.rabbitmq.com/tutorials/tutorial-three-go.html">http://www.rabbitmq.com/tutorials/tutorial-three-go.html</a>)</li>
<li>Routing(<a href="http://www.rabbitmq.com/tutorials/tutorial-four-go.html">http://www.rabbitmq.com/tutorials/tutorial-four-go.html</a>)</li>
<li>Topics(<a href="http://www.rabbitmq.com/tutorials/tutorial-five-go.html">http://www.rabbitmq.com/tutorials/tutorial-five-go.html</a>)</li>
<li>Remote Procedure Call(<a href="http://www.rabbitmq.com/tutorials/tutorial-six-go.html">http://www.rabbitmq.com/tutorials/tutorial-six-go.html</a>)</li>
</ol>
<h2 id="hello-world">&ldquo;Hello World&rdquo;</h2>
<ul>
<li>응용프로그램에서 RabbitMQ로 전달되는 메세지는 큐에 저장된다.</li>
<li>여러개의 Porducer에서 메세지를 큐에 전달을 하며, 여러개의 Consumer에서 데이터를 수신하려고 시도할 수 있다.</li>
<li>RaabbitMQ 클라이언트 라이브러리를 설치</li>
</ul>
<pre><code>go get github.com/streadway/amqp
</code></pre><ul>
<li>mq 서버에 연결</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">conn</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">amqp</span>.<span style="color:#a6e22e">Dial</span>(<span style="color:#e6db74">&#34;amqp://jaehoonn:1234@localhost:5672&#34;</span>)  
</code></pre></div><p>연결 포트는 5672번을 사용 (관리 플러그인은 15672번 포트를 사용)</p>
<ul>
<li>Connection<br>
Dial(&hellip;) 에서 Connection 타입을 만든다.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">ch</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">conn</span>.<span style="color:#a6e22e">Channel</span>()
</code></pre></div><p>Connection은 소켓 연결 관리, 프로토콜 버전 협상(?), 인증을 처리<br>
Connection을 통해서 Channel을 생성한다.</p>
<ul>
<li>Channel<br>
채널을 통해서 큐를 생성</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">q</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">ch</span>.<span style="color:#a6e22e">QueueDeclare</span>(<span style="color:#f92672">...</span>)
</code></pre></div><p>큐에 대한 설정을 할 수 있을것 같다.<br>
name: 큐의 이름<br>
durable: 브로커 재시작 후에도 큐의 상태를 유지(true)<br>
autoDelete: 소비자가 없으면 유지 되지 않는다(true)<br>
exclusive: 다른 연결에서 큐를 사용하지 못함(true)<br>
noWait: 대기열이 서버에서 선언(true)<br>
args: 사용자 정의 큐를 구성할때 사용<br>
참고) 결합된 큐가 없을때, 목적지 큐를 찾지 못하면 그냥 사라진다.</p>
<ul>
<li>보내기/받기
<ul>
<li>보내기(Publish)<br>
exchange: exchange 이름<br>
key: routing key의 이름(단일 큐일 경우에는 큐의 이름)<br>
mandatory: 전달할 수 없는 메세지일 경우에 처리<br>
immediate: 전달할 수 없는 메세지일 경우에 처리<br>
msg:</li>
<li>받기(Consume)<br>
queue:<br>
consumer:  <br>
autoAck:   <br>
exclusive: true이면 서버가 메세지의 소비자, false이면 다수의 소비자가 존재<br>
noLocal: 동일한 연결에 대해서 한번 정송한 메세지를 다시 전송하지 않는다<br>
noWait: 요청이 들어오면 바로 전송한다.<br>
args:</li>
</ul>
</li>
<li>Work Queues</li>
</ul>

					</div>
				</article>
        
				<article class="post">
					<header class="entry-header">
						<div class="entry-meta">
               <span class="posted-on">
                  <time class="entry-date published" datetime="December 10, 2016">December 10, 2016</time>
               </span>
						</div>
						<h1 class="entry-title">
						  <a href="https://shrinklabs.com/post/go_multipart-contenttype/" rel="bookmark">CreateFormFile()을 사용하면 Content-Type이 고정되는 현상</a>
						</h1>
					</header>
					<div class="entry-content">
						<p>mime/multipart를 사용해서 파일을 업로드 하려 할때 파일을 업로드할 필드를 생성하기 위해서 CreateFormFile()을 사용합니다.<br>
이를 이용해서 파일을 업로드하면 &ldquo;Content-Type&quot;이 &ldquo;application/octet-stream&rdquo; 으로 고정 되어집니다.</p>
<p>src/mime/multipart/writer.go의 CreateFormFile을 확인해 보면 다음과 같이 고정되어 있는걸 확인 할 수 있습니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">Set</span>(<span style="color:#e6db74">&#34;Content-Type&#34;</span>, <span style="color:#e6db74">&#34;application/octet-stream&#34;</span>)
</code></pre></div><p>관련한 이슈가 올라온게 혹시 있지 않을까 해서 찾아보니 이런 이슈가 있었습니다.<br>
<a href="https://github.com/golang/go/issues/16425">https://github.com/golang/go/issues/16425</a></p>
<p>bradfitz는 다음과 같이 답변을 하고 있습니다.</p>
<blockquote>
<p>Use CreatePart.
CreateFormFile is a very thin wrapper around CreatePart. Click <a href="https://golang.org/pkg/mime/multipart/#Writer.CreateFormField%5B%5D">https://golang.org/pkg/mime/multipart/#Writer.CreateFormField[]</a> and then click the CreateFormFile heading to see its source code.</p>
</blockquote>
<p>그래서 난 CreateFormFile() 함수의 구현을 수정해서 CreateFormImage()함수를 만들어서 사용하기로 했습니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">file</span>, <span style="color:#a6e22e">fileHeader</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">FormFile</span>(<span style="color:#e6db74">&#34;image&#34;</span>)
<span style="color:#f92672">...</span>
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">b</span> <span style="color:#a6e22e">bytes</span>.<span style="color:#a6e22e">Buffer</span>
<span style="color:#a6e22e">wr</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">multipart</span>.<span style="color:#a6e22e">NewWriter</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">b</span>)

<span style="color:#a6e22e">h</span> <span style="color:#f92672">:=</span> make(<span style="color:#a6e22e">textproto</span>.<span style="color:#a6e22e">MIMEHeader</span>)
<span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">Set</span>(<span style="color:#e6db74">&#34;Content-Disposition&#34;</span>,  <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Sprintf</span>(<span style="color:#e6db74">`form-data; name=&#34;%s&#34;; filename=&#34;%s&#34;`</span>, <span style="color:#a6e22e">escapeQuotes</span>(<span style="color:#e6db74">&#34;image&#34;</span>), <span style="color:#a6e22e">escapeQuotes</span>(<span style="color:#a6e22e">fileHeader</span>.<span style="color:#a6e22e">Filename</span>)))
<span style="color:#a6e22e">h</span>.<span style="color:#a6e22e">Set</span>(<span style="color:#e6db74">&#34;Content-Type&#34;</span>, <span style="color:#e6db74">&#34;image/jpeg&#34;</span>)
<span style="color:#a6e22e">fw</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">wr</span>.<span style="color:#a6e22e">CreatePart</span>(<span style="color:#a6e22e">h</span>)
</code></pre></div><p>CreateFormFile()을 사용하던 부분을 위의 코드로 교체해서 전송 하면 Content Type이 원하는 형태(image/jpeg&rdquo;)로 전달이 되어진것을 확인 할 수 있습니다.<br>
escapeQuotes() 함수는 &hellip;/multipart/writer.go의 구현을 참고하면 됩니다.</p>

					</div>
				</article>
        
				<article class="post">
					<header class="entry-header">
						<div class="entry-meta">
               <span class="posted-on">
                  <time class="entry-date published" datetime="December 6, 2016">December 6, 2016</time>
               </span>
						</div>
						<h1 class="entry-title">
						  <a href="https://shrinklabs.com/post/go_html-form/" rel="bookmark">Go코드로 HTML Form 전송</a>
						</h1>
					</header>
					<div class="entry-content">
						<p>HTML, Javascript를 사용해서 Post방식으로 Form을 전송하는 동작을 Go 코드를 작성해 보려고 합니다.<br>
우선 POST로 전송된 Form을 받아서 처리를 하는 서버쪽을 다음과 같은 구성을 갖는 코드로 만듭니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> {
    <span style="color:#e6db74">&#34;net/http&#34;</span>

    <span style="color:#e6db74">&#34;github.com/gorilla/mux&#34;</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
   <span style="color:#a6e22e">r</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">mux</span>.<span style="color:#a6e22e">Newrouter</span>().<span style="color:#a6e22e">StrictSlash</span>(<span style="color:#66d9ef">false</span>)
   <span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">HandleFunc</span>(<span style="color:#e6db74">&#34;/upload&#34;</span>, <span style="color:#a6e22e">upload</span>).<span style="color:#a6e22e">Methods</span>(<span style="color:#e6db74">&#34;POST&#34;</span>)

   <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ListenAndServe</span>(<span style="color:#e6db74">&#34;:8080&#34;</span>, <span style="color:#a6e22e">r</span>)
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">upload</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Request</span>) {
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">Method</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;POST&#34;</span> {

    }
}
</code></pre></div><p>이렇게 &ldquo;http://localhost:8080/upload&rdquo; 를 통해서 POST 방식으로 전달되는 요청을 받아서 처리하기 위한 큰틀을 만들었습니다.</p>
<p>이제 upload() 를 구현해 보겠습니다.<br>
우선 Form의 필드로 &ldquo;user&quot;를 받아오는 부분을 구현해 보면 다음과 같습니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">upload</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Request</span>) {
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">Method</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;POST&#34;</span> {
        <span style="color:#a6e22e">user</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">FormValue</span>(<span style="color:#e6db74">&#34;user&#34;</span>)
    }
}
</code></pre></div><p>위의 코드는 다음과 같은 HTML의 Form을 받아서 처리 하기 위한 구현입니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">html</span>&gt;
    &lt;<span style="color:#f92672">body</span>&gt;
        &lt;<span style="color:#f92672">form</span> <span style="color:#a6e22e">action</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/upload&#34;</span> <span style="color:#a6e22e">method</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;POST&#34;</span>&gt;
            user: &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;user&#34;</span>&gt;
            &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;submit&#34;</span>  <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;submit&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;submit&#34;</span>&gt;
        &lt;/<span style="color:#f92672">form</span>&gt;
    &lt;/<span style="color:#f92672">body</span>&gt;
&lt;/<span style="color:#f92672">html</span>&gt;
</code></pre></div><p>이 HTML을 Go 코드로 구현을 하기 위해서는 http 패키지의 PostForm() 함수를 사용할 수 있습니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">resp</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">PostForm</span>(<span style="color:#e6db74">&#34;localhost:8080/upload&#34;</span>, <span style="color:#a6e22e">url</span>.<span style="color:#a6e22e">Values</span>{<span style="color:#e6db74">&#34;user&#34;</span>, {<span style="color:#e6db74">&#34;jaehoonn&#34;</span>}})
</code></pre></div><p>그럼 HTML의 Form을 통해서 파일을 업로드를 할 경우에는 어떻게 해야 할까요?<br>
그냥 url.Values를 사용해서 파일을 업로드 할 수 있을까요? 안되는것 같습니다.</p>
<p>http 통신에서 파일을 전송하기 위해서는 mime/multipart 패키지를 사용할 수 있습니다.</p>
<p>우선 Form을 받아서 각 필드를 처리하기 위한 부분을 구현해 보면 다음과 같습니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">upload</span>(<span style="color:#a6e22e">w</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">ResponseWriter</span>, <span style="color:#a6e22e">r</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Request</span>) {
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">Method</span> <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;POST&#34;</span> {
        <span style="color:#a6e22e">user</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">FormValue</span>(<span style="color:#e6db74">&#34;user&#34;</span>)
        <span style="color:#a6e22e">file</span>, <span style="color:#a6e22e">handler</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">r</span>.<span style="color:#a6e22e">FormFile</span>(<span style="color:#e6db74">&#34;image&#34;</span>)
        <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">file</span>.<span style="color:#a6e22e">Close</span>()

        <span style="color:#a6e22e">f</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">OpenFile</span>(<span style="color:#e6db74">&#34;./&#34;</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">handler</span>.<span style="color:#a6e22e">Filename</span>, <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">O_WRONLY</span> | <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">O_CREATE</span>, <span style="color:#ae81ff">0666</span>)
        <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
            <span style="color:#66d9ef">return</span>
        }
        <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">f</span>.<span style="color:#a6e22e">Close</span>()
        <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">Copy</span>(<span style="color:#a6e22e">f</span>, <span style="color:#a6e22e">file</span>)
    }
}
</code></pre></div><p>위의 코드는 http.Request를 통해 전달된 Form의 필드 중 &ldquo;image&rdquo; 필드의 파일을 FormFile() 함수를 사용해서 구한 다음 전달된 파일이름으로 서버에서 파일을 생성하도록 하고 있습니다.</p>
<p>이제 File을 전달하는 HTML 코드를 살펴보겠습니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">&lt;<span style="color:#f92672">html</span>&gt;
    &lt;<span style="color:#f92672">body</span>&gt;
        &lt;<span style="color:#f92672">form</span> <span style="color:#a6e22e">action</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/upload&#34;</span> <span style="color:#a6e22e">method</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;POST&#34;</span> <span style="color:#a6e22e">enctype</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;multipart/form-data&#34;</span>&gt;
            user: &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;text&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;user&#34;</span>&gt;&lt;<span style="color:#f92672">br</span>&gt;
            file: &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;file&#34;</span> <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;image&#34;</span>&gt;
            &lt;<span style="color:#f92672">input</span> <span style="color:#a6e22e">type</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;submit&#34;</span>  <span style="color:#a6e22e">name</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;submit&#34;</span> <span style="color:#a6e22e">value</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;submit&#34;</span>&gt;
        &lt;/<span style="color:#f92672">form</span>&gt;
    &lt;/<span style="color:#f92672">body</span>&gt;
&lt;/<span style="color:#f92672">html</span>&gt;
</code></pre></div><p>이렇게 하면 user라는 문자열 필드와 image라는 파일 필드를 갖는 Form이 전송됩니다.</p>
<p>이제 이 HTML의 내용을 Go코드로 구현을 하면 다음과 같습니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#a6e22e">url</span> <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;http://localhost:8080/upload&#34;</span>

    <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">b</span> <span style="color:#a6e22e">bytes</span>.<span style="color:#a6e22e">Buffer</span>
    <span style="color:#a6e22e">w</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">multipart</span>.<span style="color:#a6e22e">NewWriter</span>(<span style="color:#f92672">&amp;</span><span style="color:#a6e22e">b</span>)
    <span style="color:#a6e22e">f</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Open</span>(<span style="color:#e6db74">&#34;./sample.jpg&#34;</span>)
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">err</span>
    }
    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">f</span>.<span style="color:#a6e22e">Close</span>()
    
    <span style="color:#a6e22e">fw</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">w</span>.<span style="color:#a6e22e">CreateFormFile</span>(<span style="color:#e6db74">&#34;image&#34;</span>, <span style="color:#e6db74">&#34;./sample.jpg&#34;</span>)
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#66d9ef">return</span>
    }
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">err</span> = <span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">Copy</span>(<span style="color:#a6e22e">fw</span>, <span style="color:#a6e22e">f</span>); <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#66d9ef">return</span>
    }
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">fw</span>, <span style="color:#a6e22e">err</span> = <span style="color:#a6e22e">w</span>.<span style="color:#a6e22e">CreateFormField</span>(<span style="color:#e6db74">&#34;user&#34;</span>); <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#66d9ef">return</span>
    }
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">err</span> = <span style="color:#a6e22e">fw</span>.<span style="color:#a6e22e">Write</span>([]byte(<span style="color:#e6db74">&#34;jaehoonn&#34;</span>)); <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#66d9ef">return</span>
    }

    <span style="color:#a6e22e">w</span>.<span style="color:#a6e22e">Close</span>()

    <span style="color:#a6e22e">req</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">NewRequest</span>(<span style="color:#e6db74">&#34;POST&#34;</span>, <span style="color:#a6e22e">url</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">b</span>)
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#66d9ef">return</span>
    }

    <span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">Header</span>.<span style="color:#a6e22e">Set</span>(<span style="color:#e6db74">&#34;Content-Type&#34;</span>, <span style="color:#a6e22e">w</span>.<span style="color:#a6e22e">FormDataContentType</span>())

    <span style="color:#a6e22e">client</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Client</span>{}
    <span style="color:#a6e22e">res</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">client</span>.<span style="color:#a6e22e">Do</span>(<span style="color:#a6e22e">req</span>)
    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
        <span style="color:#66d9ef">return</span>
    }
}
</code></pre></div><p>위의 코드는 로컬의 현재 위치에 있는 &ldquo;sample.jpg&rdquo; 파일과 &ldquo;jaehoonn&quot;이라는 이름을 전송하려고 합니다.</p>
<p>mime/multipart의 Writer를 생성해서 File 필드를 하나 만들고(CreateFormFile), 일반 필드를 하나 만듭니다.(CreateFormField)<br>
HTML의 Form에서 action에 해당하는 url과 파일 버퍼를 사용해서 request를 만듭니다. (NewRequest)<br>
만들어진 request와 http.Client를 이용해서 POST방식의 Form을 전달합니다.</p>

					</div>
				</article>
        
				<article class="post">
					<header class="entry-header">
						<div class="entry-meta">
               <span class="posted-on">
                  <time class="entry-date published" datetime="November 25, 2016">November 25, 2016</time>
               </span>
						</div>
						<h1 class="entry-title">
						  <a href="https://shrinklabs.com/post/go_encode/" rel="bookmark">인코딩된 텍스트 디코딩하기</a>
						</h1>
					</header>
					<div class="entry-content">
						<p>Javascript에서 encodeURIComponent() 함수를 사용해서 전달받은 문자열을 디코딩해서 보기 위해서는 &ldquo;net/url&rdquo; 패키지의 QueryUnescape() 함수를 사용할 수 있습니다.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">email</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">url</span>.<span style="color:#a6e22e">QueryUnescape</span>(<span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">Email</span>)
</code></pre></div>
					</div>
				</article>
        
				<article class="post">
					<header class="entry-header">
						<div class="entry-meta">
               <span class="posted-on">
                  <time class="entry-date published" datetime="October 14, 2016">October 14, 2016</time>
               </span>
						</div>
						<h1 class="entry-title">
						  <a href="https://shrinklabs.com/post/go_govendor/" rel="bookmark">vendor 관리</a>
						</h1>
					</header>
					<div class="entry-content">
						<p>vendoring되어 있는 패키지를 관리해야 할 이유가 무엇인지에 대해서 찾아보다가 좋은 글을 발견했습니다.<br>
<a href="https://gocodecloud.com/blog/2016/03/29/go-vendoring-beginner-tutorial/">https://gocodecloud.com/blog/2016/03/29/go-vendoring-beginner-tutorial/</a></p>
<p>이 글을 읽고 이해한 정도만을 요약해 봅니다</p>
<hr>
<h2 id="vendoring을-왜-하나">vendoring을 왜 하나?</h2>
<p>Project A에서 사용하는 Pkg X의 리비전 1을 사용하고 있습니다. 그런데 Project B에서는 Pkg X의 리비전 2를 사용하려 합니다.<br>
그런데 $GOPATH 안에는 같은 패키지를 하나만 갖고 있을 수 있습니다.<br>
Pkg X의 리비전을 Project A에 맞추면 Project B가 빌드를 실패하고, Project B에 맞추면 Project A가 빌드에 실패하게 됩니다.<br>
그래서 패키지들을 vendor 아래에 위치 시킵니다.</p>
<p>프로젝트를 진행하면서 vendoring 되어 있는 패키지들의 리비전을 공유, 관리하기 위해서 godep, govendor 등과 같은 걸 사용할 수 있습니다.<br>
다른 도구들은 무시하고 여기에서는 govendor의 사용법만 알아보려고 합니다.<br>
govendor를 사용하면, $GOPATH에는 무조건 최신 리비전의 패키지를 받아 놓고, 프로젝트에서 필요한 리비전의 패키지만을 vendor에 복사해 놓고 사용할 수 있습니다.</p>
<h2 id="govendor-사용">govendor 사용</h2>
<p>govendor를 설치합니다.</p>
<pre><code>$ go get -u github.com/kardianos/govendor
</code></pre><p>프로젝트 폴더로 이동합니다.</p>
<pre><code>$ cd yourproject
</code></pre><p>govendor를 사용하기 위한 초기화를 합니다.</p>
<pre><code>$ govendor init
</code></pre><p>이제 vendor 폴더가 생기고 그 안에 vednor.json이 생기게 됩니다.</p>
<p>사용할 패키지들을 github 등에서 clone 하거나 go get을 합니다.<br>
$GOPATH/src 아래에 받아져 있게 됩니다.</p>
<p>이제 yourproject 폴더안에서 &ldquo;govendor add +external&rdquo; 을 합니다.<br>
+external 은 src 아래 받았던 패키지 입니다.<br>
govendor add 를 하면 yourproject의 vendor 폴더로 옮겨지게 됩니다.<br>
그리고 vendor.json에 현재 add 한 패키지의 리비전등의 정보를 기록합니다.</p>
<p>이 후에 필요에 의해서 패키지를 업데이하기 위해서는</p>
<pre><code>$ govendor update
</code></pre><p>를 하면 최신의 패키지로 갱신됩니다.</p>
<p>그리고 현재 사용중이었던 패키지를 다시 받아오고 싶으면,</p>
<pre><code>$ govendor sync 
</code></pre><p>를 사용하면 vendor.json에 기록되어 있는 패키지를 다시 받아옵니다.</p>

					</div>
				</article>
        
				<article class="post">
					<header class="entry-header">
						<div class="entry-meta">
               <span class="posted-on">
                  <time class="entry-date published" datetime="October 13, 2016">October 13, 2016</time>
               </span>
						</div>
						<h1 class="entry-title">
						  <a href="https://shrinklabs.com/post/tool_hugo/" rel="bookmark">GitHub 페이지에 Hugo 올리기</a>
						</h1>
					</header>
					<div class="entry-content">
						<p>Blogger에서 Hugo( <a href="http://gohugo.io">http://gohugo.io</a> )로 갈아타는 과정을 정리해 본다.</p>
<h2 id="hugo-를-설치한다">Hugo 를 설치한다</h2>
<p><a href="https://github.com/spf13/hugo/releases">https://github.com/spf13/hugo/releases</a> 에서 본인의 환경에 맞는걸 찾아서 설치한다.<br>
Linux는 deb를 제공하고 있지만, Windows는 exe파일을 제공하고 있어서 환경변수(PATH)를 잡아주던가, 환경변수가 잡혀있는곳에 복사를 해준다.<br>
(이름도 hugo.exe로 바꿔주는게 사용하기에 더 편리한것 같다.)<br>
MAC은 안 써봐서 잘 모르겠다&hellip;;;;</p>
<h2 id="github에-저장소를-만든다">github에 저장소를 만든다</h2>
<p>github에서 호스팅을 받아서 hugo를 사용하기 위해서는 2개의 저장소를 만들어야 한다.<br>
hugo의 컨텐츠를 관리하기 위한 저장소가 필요하다.(ex: <a href="https://github.com/jaehoonn/blog">https://github.com/jaehoonn/blog</a>)<br>
그리고 컨텐츠를 보여주기 위한 github의 페이지 저장소(ex: <a href="https://github.com/jaehoonn/jaehoonn.github.io">https://github.com/jaehoonn/jaehoonn.github.io</a>)</p>
<h2 id="로컬에서-기초-작업을-한다">로컬에서 기초 작업을 한다</h2>
<p>이제 로컬에서 hugo를 이용하여 컨텐츠를 관리하기 위한 워크 스페이스를 만들어 보자.<br>
다음과 같이 blog이라는 새로운 사이트를 만든다.</p>
<pre><code>$ hugo new site blog 
</code></pre><p>blog 디렉토리로 들어가 보면, themes가 있다.</p>
<pre><code>$ cd blog   
</code></pre><p>여기에 원하는 테마(ex: hemingway)를 받는다.<br>
테마는 <a href="http://themes.gohugo.io/">http://themes.gohugo.io/</a> 에서 골라보면 된다.</p>
<pre><code>$ cd themes  
$ git clone https://github.com/tanksuzuki/hemingway.git  
</code></pre><p>hemingway의 리모트를 제거한다.(이건 해도 그만 안해도 그만이다.)</p>
<pre><code>$ cd hemingway    
$ git remote rm origin
</code></pre><p>이제 /themes/hemingway 에서 blog로 돌아온다.</p>
<pre><code>$ cd ../..
</code></pre><p>config.toml을 수정해서 사이트의 기본 설정을 한다.<br>
이 부분은 개인 취향과 테마에서 필요한 설정들을 하도록 한다.</p>
<p>이제 로컬의 blog 디렉토리에 처음에 만들었던 github의 blog( github.com/jaehoonn/blog ) 을 리모트로 등록한다.</p>
<pre><code>$ git init  
$ git remote add origin git@github.com:jaehoonn/blog.git
</code></pre><p>그리고 github.com/jaehoonn/jaehoonn.github.io를 blog의 서브모듈로 등록한다.</p>
<pre><code>$ git submodule add -b master git@github.com:jaehoonn/jaehoonn.github.io.git public
</code></pre><h2 id="컨텐츠를-만든다">컨텐츠를 만든다</h2>
<p>컨텐츠를 만들기 위한 md 파일을 생성한다.</p>
<pre><code>$ hugo new post/blah.md
</code></pre><p>위와 같이 하면 /content/post/blah.md 파일이 생성되어 있다.<br>
blah.md 파일의 상단 부분을 적당하게 수정하고, 아래쪽의 &ldquo;+++&rdquo; 다음 부터 내용을 작성한다.</p>
<h2 id="컨텐츠-블로그에-반영">컨텐츠 블로그에 반영</h2>
<p>Linux의 경우 <a href="http://gohugo.io/tutorials/github-pages-blog/">http://gohugo.io/tutorials/github-pages-blog/</a> 의 제일 하단에서 제공하는 deploy.sh를 사용하면 된다.<br>
Windows는 배치파일을 만들어서 사용해도 되겠지만, 귀찮으면 deploy.sh의 내용이 별로 어렵지 않은 내용이니, 하나씩 따라하면 된다.</p>
<p>내용을 간략하게 보면, 다음과 같다.</p>
<p>로컬의 /blog 경로에서 시작한다.</p>
<pre><code>$ hugo -t hemingway   
</code></pre><p>를 실행해서 테마가 적용된 블로그 내용을 public에 생성한다.<br>
(혹시 개인 도메인을 사용하고 싶으면 CNAME 파일도 여기에서 등록을 해주면 된다.)</p>
<pre><code>$ cd public
</code></pre><p>으로 public 디랙토리로 이동한다.</p>
<pre><code>$ git add -A
</code></pre><p>public 디렉토리의 모든 파일을 add 한다.</p>
<pre><code>$ git commit -m &quot;blah&quot;
</code></pre><p>이제 변경된 내용을 커밋한다.</p>
<pre><code>$ git push origin master
</code></pre><p>지금 까지 작업한 내용을 github.com/jaehoonn/jaehoonn.github.io에 반영한다.</p>
<pre><code>$ cd ..
</code></pre><p>blog 디렉토리로 돌아온다.</p>
<p>이제 blog의 변경된 내용을 github.com/jaehoonn/blog 에 반영을 한다.</p>
<pre><code>$ git add -A  
$ git commit -m &quot;blahblah&quot;  
$ git push origin master
</code></pre><h2 id="새로운-환경에서-컨텐츠-관리">새로운 환경에서 컨텐츠 관리</h2>
<p>항상 동일한 장소에서 컨텐츠를 만들고 있다면 모르겠지만,<br>
회사, 집 그리고 노트북에서 사용을 하고 있다거나 OS를 새로설치하고 다시 사용하기 위해서는,<br>
&ldquo;github.com/jaehoonn/blog&quot;을 새로 clone 받아서 사용해야 한다.<br>
이때 필요한 절차는 다음과 같다.</p>
<p>blog을 clone 받는다.</p>
<pre><code>$ git clone git@github.com:jaehoonn/blog.git
</code></pre><p>submodule로 등록해 놓은 public의 내용을 업데이트 한다.</p>
<pre><code>$ git submodule init  
$ git submodule update
</code></pre><p>테마(themes/hemingway)의 리모트를 추가하고 테마를 갖고 온다.<br>
(themes도 submodule로 등록해 놓고 사용하면 편리하지 않을까 싶다.)</p>
<pre><code>$ cd themes  
$ cd hemingway    
$ git init  
$ git remote add origin https://github.com/masa0221/hemingway  
$ git pull origin master  
</code></pre><p>이렇게 하고 글을 작성하고 deploy.sh 를 실행하면, 잘 안된다.<br>
원인은 public으로 들어가서 확인을 해보면,</p>
<pre><code>$ cd public  
$ git status
</code></pre><p>다음과 같은 메세지를 보게 된다.</p>
<pre><code>HEAD detached from 185cdaf  
nothing to commit, working tree clean
</code></pre><p>이게 무슨 상황인지는 다음의 링크를 확인해 보면 된다.<br>
<a href="https://git-scm.com/book/ko/v1/Git-%EB%8F%84%EA%B5%AC-%EC%84%9C%EB%B8%8C%EB%AA%A8%EB%93%88#%EC%84%9C%EB%B8%8C%EB%AA%A8%EB%93%88-%EC%82%AC%EC%9A%A9%ED%95%A0-%EB%95%8C-%EC%A3%BC%EC%9D%98%ED%95%A0-%EC%A0%90%EB%93%A4">서브모듈 사용할 때 주의할 점들</a></p>
<p>그래서 링크에 나와 있듯이&hellip;</p>
<pre><code>$ git checkout master
</code></pre><p>이제 다시 &ldquo;blog/&rdquo; 로 돌아가서, deploy를 하면 잘 올라간다.</p>

					</div>
				</article>
        
				<article class="post">
					<header class="entry-header">
						<div class="entry-meta">
               <span class="posted-on">
                  <time class="entry-date published" datetime="October 12, 2016">October 12, 2016</time>
               </span>
						</div>
						<h1 class="entry-title">
						  <a href="https://shrinklabs.com/post/tool_tmux/" rel="bookmark">tmux</a>
						</h1>
					</header>
					<div class="entry-content">
						<h2 id="tmux-시작">tmux 시작</h2>
<pre><code>$ tmux  
$ tmux new-session(or new) -s [세션 이름] -n [윈도우 이름]
</code></pre><h2 id="tmux-종료">tmux 종료</h2>
<pre><code>$ ctrl-d  
$ exit
</code></pre><h2 id="tmux-detach현재-클라이언트">tmux detach(현재 클라이언트)</h2>
<pre><code>$ ctrl-b, d
</code></pre><h2 id="tmux-attach">tmux attach</h2>
<pre><code>$ tmux attach -t [세션 이름]
</code></pre><h2 id="window-생성">window 생성</h2>
<pre><code>$ ctrl-b, c
</code></pre><h2 id="window-리스트">window 리스트</h2>
<pre><code>$ ctrl-b, w
</code></pre><h2 id="window-이동현재의-이전다음-이전">window 이동(현재의 이전(다음, 이전)</h2>
<pre><code>$ ctrl-b, l(n, p)
</code></pre><h2 id="window-종료">window 종료</h2>
<pre><code>$ ctrl-b, &amp;
</code></pre><h2 id="window-이름-변경">window 이름 변경</h2>
<pre><code>$ ctrl-b, ,
</code></pre><h2 id="pane-가로-나누기">pane 가로 나누기</h2>
<pre><code>$ ctrl-b, %
</code></pre><h2 id="pane-세로-나누기">pane 세로 나누기</h2>
<pre><code>$ ctrl-b, &quot;
</code></pre><h2 id="pane-의-번호를-화면에-출력">pane 의 번호를 화면에 출력</h2>
<pre><code>$ ctrl-b, q
</code></pre><h2 id="pane-크기-조절">pane 크기 조절</h2>
<pre><code>$ ctrl-b, (ctrl + 방향키)
</code></pre><h2 id="모든-pane의-크기-동일하게-만들기">모든 pane의 크기 동일하게 만들기</h2>
<pre><code>$ ctrl-b alt-1 # 모든 vertical split 넓이를 동일하게 변경
$ ctrl-b alt-2 # 모든 horizontal split의 넓이를 동일하게 변경
</code></pre><h2 id="pane-이동하기">pane 이동하기</h2>
<pre><code>$ ctrl-b, o
</code></pre><h2 id="pane-이동하기-1">pane 이동하기</h2>
<pre><code>$ ctrl-b, 방향키  
$ ctrl-b {(})
</code></pre><h2 id="pane-삭제하기">pane 삭제하기</h2>
<pre><code>$ ctrl-d
</code></pre><h2 id="pane-화면-스크롤-모드-시작">pane 화면 스크롤 모드 시작</h2>
<pre><code>$ ctrl-b, [
</code></pre><h2 id="pane-화면-스크롤-모드-종료">pane 화면 스크롤 모드 종료</h2>
<pre><code>$ q
</code></pre><h2 id="입력되는-내용을-모든-pane에-동일하게-적용">입력되는 내용을 모든 pane에 동일하게 적용</h2>
<pre><code>$ ctrl-b

: setw synchronize-panes
</code></pre><p><a href="http://nodeqa.com/nodejs_ref/99">http://nodeqa.com/nodejs_ref/99</a><br>
<a href="http://nodeqa.com/nodejs_ref/100">http://nodeqa.com/nodejs_ref/100</a><br>
<a href="http://nodeqa.com/nodejs_ref/101">http://nodeqa.com/nodejs_ref/101</a><br>
<a href="http://superuser.com/questions/209437/how-do-i-scroll-in-tmux">http://superuser.com/questions/209437/how-do-i-scroll-in-tmux</a></p>

					</div>
				</article>
        
				<article class="post">
					<header class="entry-header">
						<div class="entry-meta">
               <span class="posted-on">
                  <time class="entry-date published" datetime="September 5, 2016">September 5, 2016</time>
               </span>
						</div>
						<h1 class="entry-title">
						  <a href="https://shrinklabs.com/post/tool_vi/" rel="bookmark">vi 팁</a>
						</h1>
					</header>
					<div class="entry-content">
						<h2 id="현재-작업중인-파일의-경로와-이름-확인">현재 작업중인 파일의 경로와 이름 확인</h2>
<p>현재 작업중인 파일의 경로 또는 이름이 궁금할 경우가 있다.</p>
<pre><code>ctrl + g  
</code></pre><p>또는</p>
<pre><code>: f
</code></pre><h2 id="80컬럼에-버티컬-라인">80컬럼에 버티컬 라인</h2>
<p>vi에서 80컬럼의 버티컬 라인을 생성하려면 다음과 같이 한다.</p>
<pre><code>set colorcolumn=80
</code></pre><p>을 적용하면, 빨간색 라인이 생긴다.</p>
<h2 id="파일-관리">파일 관리</h2>
<p>NerdTree를 사용하지 않고 vi에서 파일과 디렉토리를 관리하는 방법</p>
<p>파일 네비게이션</p>
<ol>
<li>표준모드(ex: i, o, a 같은걸 입력해서 입력모드로 전환되기 전 상태)</li>
<li>&ldquo;e.&rdquo; (설명: &ldquo;.&rdquo; 는 현재의 디렉토리)</li>
</ol>
<p>디렉토리 만들기</p>
<ol>
<li>명령라인 모드 (ex: &ldquo;:wq&rdquo; 해서 현재 작업중인 내용을 저장하고 종료 하기 위한 명령을 입력하기 위한 모드)</li>
<li>&ldquo;:!mkidir foo&rdquo; (ex: &ldquo;foo&rdquo; 라는 디렉토리 생성)</li>
</ol>
<p>또는 &ldquo;:!mkdir -p foo/bar&rdquo; (ex: foo의 하위 디렉토리인 bar까지 생성)</p>
<h2 id="buffer이동">buffer이동</h2>
<p>vi를 사용중에 열려있는 buffer를 이동해야 할때가 있다.</p>
<p>다음과 같이 하면 열려있는 1번 bufffer로 이동한다.</p>
<pre><code>:buffer 1  
</code></pre><p>열려 있는 buffer전체를 보려면,</p>
<pre><code>:buffers  
</code></pre><p>와 같이 한다.</p>
<h2 id="화면-분리">화면 분리</h2>
<p>분리는 가로(vsplit), 세로(split)으로 나눌 수 있다.</p>
<pre><code>:[vsp]lit [파일명]  
:[sp]lit [파일명]  
</code></pre><p>화면간의 이동은</p>
<blockquote>
<p>ctrl + w [h j k l]</p>
</blockquote>
<p>현재 화면 닫기는</p>
<blockquote>
<p>:q</p>
</blockquote>
<p>화면을 모두 닫기 위해서는</p>
<blockquote>
<p>:qa</p>
</blockquote>
<p>현재 커서가 있는 화면을 제외하고 모두 닫기</p>
<blockquote>
<p>ctrl + w, o</p>
</blockquote>
<h2 id="vimgrep">vimgrep</h2>
<p>현재 디렉토리내에서 &ldquo;.go&rdquo; 파일들중에서 문자(&ldquo;TEXT&rdquo;)에 대한  검색이 필요할 경우</p>
<pre><code>:vimgrep /TEXT/ ./*.go
</code></pre><p>여러개의 결과들을 이동</p>
<pre><code>:cfirst
:cnext
:cprev
:clast
</code></pre><p>검색된 결과를 리스트로 보기</p>
<pre><code>:cw
</code></pre>
					</div>
				</article>
        
				<article class="post">
					<header class="entry-header">
						<div class="entry-meta">
               <span class="posted-on">
                  <time class="entry-date published" datetime="September 5, 2016">September 5, 2016</time>
               </span>
						</div>
						<h1 class="entry-title">
						  <a href="https://shrinklabs.com/post/go_vim-go/" rel="bookmark">vim-go 기본 템플릿 비활성화</a>
						</h1>
					</header>
					<div class="entry-content">
						<p>vim-go가 언제부터인가 main.go 를 만들면 템플릿으로 fmt.Println(&ldquo;vim-go&rdquo;) 를 찍어주는 코드를 자동으로 생성해 주기 시작했다.</p>
<p>나는 아무것도 나오지 않기를 바랬는데, 이런게 나와서 매번 지우는 작업을 하는게 싫었다.
그래서 설정중에 go_template_autocreate 를 조절했다.</p>
<pre><code>let g:go_template_autocreate = 0
</code></pre><p>와 같이 하면 이제 아무것도 없는 빈 화면이 나온다.</p>
<p>혹시라도 반복적으로 나오는게 좋은데 &ldquo;vim-go&quot;를 찍는게 아닌 특정한 코드가 필요하다면, &ldquo;.vim/bundle/vim-go/templates/hello_world.go&rdquo; 파일을 수정해도 된다.
또는 특정한 템플릿을 지정하고 싶다면, 다음과 같이,</p>
<pre><code>let g:go_template_file = &quot;hello_world.go&quot;
</code></pre><p>로 해도 된다. 여기에서 hello_world.go 대신에 템플릿으로 지정하고 싶은 파일을 입력 하면된다.</p>

					</div>
				</article>
        
				<article class="post">
					<header class="entry-header">
						<div class="entry-meta">
               <span class="posted-on">
                  <time class="entry-date published" datetime="September 3, 2016">September 3, 2016</time>
               </span>
						</div>
						<h1 class="entry-title">
						  <a href="https://shrinklabs.com/post/go_template/" rel="bookmark">template을 생성할때 왜 이름을 지정할까?</a>
						</h1>
					</header>
					<div class="entry-content">
						<p>Go언어의 Template 엔진을 사용할때, 왜 New()의 파라미터로 이름을 만들어서 넘겨야 하는지가 궁금했었다.</p>
<p>Template and Associated templates라는 글을 읽고 어느 정도 이해를 하게 되었다.</p>
<p>다음은 위 글의 내용을 요약한 것이다.</p>
<p>template.New() 로 template을 만들때, 이름을 정해서 만든다.<br>
이 때 FuncMap과 템플릿 리스트를 갖는 그룹(그룹의 이 글에서 사용하는 용어로 Associated Templates를 가르킨다)이 생성된다.<br>
FuncMap에 대해서는,<br>
<a href="https://golang.org/pkg/html/template/#FuncMap">https://golang.org/pkg/html/template/#FuncMap</a><br>
<a href="http://goinbigdata.com/example-of-using-templates-in-golang/">http://goinbigdata.com/example-of-using-templates-in-golang/</a><br>
<a href="http://technosophos.com/2013/11/23/using-custom-template-functions-in-go.html">http://technosophos.com/2013/11/23/using-custom-template-functions-in-go.html</a><br>
를 확인해본다.</p>
<p>New()를 했어도 아직 템플릿 리스트에서 관리되는 대상은 아니다.<br>
Parse(&hellip;)를 하면 템플릿 리스트에 추가가 된다.</p>
<p>처음에 생성한 template &ldquo;t1&quot;으로 New()를 하면 연관된 템플릿을 생성할 수 있다.<br>
&ldquo;t1&quot;으로 생성한 template들은 동일한 템플릿 리스트에서 관리되어진다.</p>
<p>현재 템플릿 리스트에서는 &ldquo;t1&rdquo; 템플릿을 더 이상 만들 수 없다.</p>
<p>Lookup()으로 현재 템플릿 리스트에서 관리되고 있는 template을 찾을 수 있다.</p>
<p>Templates() 함수로 템플릿 리스트의 template들을 모두 구한다.</p>
<p>Execute() 와 ExecuteTemplate() 의 차이<br>
Execute() 는 호출한 template 객체를 실행한다.<br>
ExecuteTemplate() 는 호출한 template 객체가 관리되는 템플릿 리스트에서 인자로 넘겨진 이름의 template 객체를 찾아서 실행한다.</p>
<p>ParseFiles() 는 파라미터로 넘겨진 파일 이름들을 템플릿 리스트에서 관리하는 리스트의 New()로 template을 생성할때 인자로 넘기는 name의 역할로 사용된다.</p>

					</div>
				</article>
        
			</div>
		</div>

		<center class="">
			<ul class="pagination">
        
<ul class="pagination">
  <li class="page-item">
    <a href="/post/" class="page-link" aria-label="First"><span aria-hidden="true">&laquo;&laquo;</span></a>
  </li>
  <li class="page-item">
    <a href="/post/page/3/" class="page-link" aria-label="Previous"><span aria-hidden="true">&laquo;</span></a>
  </li>
  <li class="page-item">
    <a class="page-link" href="/post/">1</a>
  </li>
  <li class="page-item">
    <a class="page-link" href="/post/page/2/">2</a>
  </li>
  <li class="page-item">
    <a class="page-link" href="/post/page/3/">3</a>
  </li>
  <li class="page-item active">
    <a class="page-link" href="/post/page/4/">4</a>
  </li>
  <li class="page-item">
    <a class="page-link" href="/post/page/5/">5</a>
  </li>
  <li class="page-item">
    <a class="page-link" href="/post/page/6/">6</a>
  </li>
  <li class="page-item">
    <a href="/post/page/5/" class="page-link" aria-label="Next"><span aria-hidden="true">&raquo;</span></a>
  </li>
  <li class="page-item">
    <a href="/post/page/6/" class="page-link" aria-label="Last"><span aria-hidden="true">&raquo;&raquo;</span></a>
  </li>
</ul>


			</ul>
		</center>
	</div>	

</main>

    
    
      <footer id="footer">
	<div class="container">
		<div class="row">
			

			
			<div class="col-md-3 widget">
				<h3 class="widget-title">Follow me</h3>
				<div class="widget-body">
					<p class="follow-me-icons">
            
							
								<a href="https://www.facebook.com/jaehoon" target="_blank"><i class="fab fa-facebook-square fa-1x"></i></a>
							
            
							
								<a href="https://twitter.com/jaehoonn_" target="_blank"><i class="fab fa-twitter-square fa-1x"></i></a>
							
            
							
								<a href="https://github.com/jaehoonn" target="_blank"><i class="fab fa-github fa-1x"></i></a>
							
            
							
								<a href="mailto:jaehoon@shrinklabs.com" target="_blank"><i class="fas fa-envelope-square fa-1x"></i></a>
							
            
					</p>
				</div>
			</div>
			

			

			

		</div> 
	</div>
</footer>

<footer id="underfooter">
	<div class="container">
		<div class="row">

			<div class="col-md-6 widget">
				<div class="widget-body">
					<p></p>
				</div>
			</div>

			<div class="col-md-6 widget">
				<div class="widget-body">
					<p class="text-right">
						Copyright &copy; 2021, <br>
						Design: <a href="http://www.gettemplate.com" rel="designer">Initio by GetTemplate</a> - 
						Powered by: <a href="https://gohugo.io/" rel="poweredby">Hugo</a>
					</p>
				</div>
			</div>

		</div> 
	</div>
</footer>




<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>




<script src="https://shrinklabs.com/js/bundle.min.b4d4f6818b4e26d94fb4399ccecba55248c6c39b666a474da4289f5f9dd5de310f550d6db5ab597255174ef0acf2fd488c3e5d92f0cabc10600c94b70c601f28.js" integrity="sha512-tNT2gYtOJtlPtDmczsulUkjGw5tmakdNpCifX53V3jEPVQ1ttatZclUXTvCs8v1IjD5dkvDKvBBgDJS3DGAfKA=="></script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'G-4LRCTZDF74', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>

    
  </body>
  
</html>